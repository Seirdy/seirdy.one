{{ $light_svg := resources.GetMatch (printf "/p/%s.svg" (.Get "name")) -}}
{{ $light_png := resources.GetMatch (printf "/p/%s.png" (.Get "name")) -}}
{{ $light_webp := resources.GetMatch (printf "/p/%s.webp" (.Get "name")) -}}
{{ $light_avif := resources.GetMatch (printf "/p/%s.avif" (.Get "name")) -}}
{{ $dark_svg := resources.GetMatch (printf "/p/%s_dark.svg" (.Get "name")) -}}
{{ $dark_png := resources.GetMatch (printf "/p/%s_dark.png" (.Get "name")) -}}
{{ $dark_webp := resources.GetMatch (printf "/p/%s_dark.webp" (.Get "name")) -}}
{{ $dark_avif := resources.GetMatch (printf "/p/%s_dark.avif" (.Get "name")) -}}
<picture>
	{{ with $dark_svg -}}
	{{ $dark_svg_src := . | resources.Fingerprint "md5" -}}
	<source
		srcset="{{ $dark_svg_src.RelPermalink }}"
		type="image/svg+xml"
		media="(prefers-color-scheme: dark)">
	{{ end -}}
	{{ with $dark_avif -}}
	{{ $dark_avif_src := . | resources.Fingerprint "md5" -}}
	<source
		srcset="{{ $dark_avif_src.RelPermalink }}"
		type="image/avif"
		media="(prefers-color-scheme: dark)">
	{{ end -}}
	{{ with $dark_webp -}}
	{{ $dark_webp_src := . | resources.Fingerprint "md5" -}}
	<source
		srcset="{{ $dark_webp_src.RelPermalink }}"
		type="image/webp"
		media="(prefers-color-scheme: dark)">
	{{ end -}}
	{{ with $dark_png -}}
	{{ $dark_png_src := . | resources.Fingerprint "md5" -}}
	<source
		srcset="{{ $dark_png_src.RelPermalink }}"
		type="image/png"
		media="(prefers-color-scheme: dark)">
	{{ end -}}
	{{ with $light_svg -}}
	{{ $light_svg_src := . | resources.Fingerprint "md5" -}}
	<source
		srcset="{{ $light_svg_src.RelPermalink }}"
		type="image/svg+xml">
	{{ end -}}
	{{ with $light_avif -}}
	{{ $light_avif_src := . | resources.Fingerprint "md5" -}}
	<source
		srcset="{{ $light_avif_src.RelPermalink }}"
		type="image/avif">
	{{ end -}}
	{{ with $light_webp -}}
	{{ $light_webp_src := . | resources.Fingerprint "md5" -}}
	<source
		srcset="{{ $light_webp_src.RelPermalink }}"
		type="image/webp">
	{{ end -}}
	{{ $light_png_src := $light_png | resources.Fingerprint "md5" -}}
	<source
		srcset="{{ $light_png_src.RelPermalink }}"
		type="image/png">
	<img
		width="{{ $light_png.Width }}"
		src="{{ $light_png.RelPermalink }}" alt='{{ .Get "alt" }}'>
</picture>
